<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Maggie Bakery | Reservations</title>

  <style>
    :root{
      --green:#0f3d2e;
      --gold:#c9a86a;
      --gold2:#b89655;
      --text:#16221c;
      --muted:#5c6b63;
      --card: rgba(255,255,255,.92);
      --stroke: rgba(201,168,106,.22);
      --shadow: 0 60px 140px rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      min-height: 100vh;
      color: var(--text);
      background: linear-gradient(rgba(13,55,40,.76), rgba(13,55,40,.90));
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:url("images/restaurant.jpg") center/cover no-repeat;
      filter: blur(5px) brightness(.90);
      transform: scale(1.05);
      z-index:-2;
    }

    .wrap{
      max-width: 920px;
      margin: 56px auto;
      padding: 0 16px 64px;
    }

    .card{
      background: var(--card);
      backdrop-filter: blur(18px);
      border-radius: 28px;
      padding: 32px;
      box-shadow: var(--shadow);
      border: 1px solid var(--stroke);
    }

    .brand{
      font-size: 24px;
      letter-spacing: .26em;
      text-transform: uppercase;
      color: var(--gold);
      font-weight: 900;
      text-align:center;
      margin: 6px 0 14px;
    }

    .sub{
      margin:0;
      text-align:center;
      color: var(--muted);
      font-size: 14px;
    }

    .info{
      margin-top: 18px;
      display:grid;
      gap:10px;
      justify-content:center;
    }

    .pill{
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap: 12px;
      padding: 12px 14px;
      border-radius: 999px;
      background: rgba(15,61,46,.065);
      border: 1px solid rgba(15,61,46,.10);
      color: rgba(15,61,46,.86);
      font-size: 12px;
      font-weight: 700;
      width: min(520px, 100%);
      margin: 0 auto;
    }

    .pill.has-call{
      justify-content: space-between;
    }

    .pill.gold{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(201,168,106,.55);
      color: rgba(120,86,30,.92);
    }

    .pill a{
      color: rgba(15,61,46,.86);
      text-decoration:none;
      border-bottom: 1px solid rgba(15,61,46,.18);
    }

    .call{
      text-decoration:none;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(201,168,106,.45);
      background: rgba(201,168,106,.16);
      color: rgba(120,86,30,.96);
      font-weight: 900;
      font-size: 12px;
    }

    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
      margin-top: 22px;
    }

    label{
      display:block;
      font-size:13px;
      margin:12px 0 6px;
      color: rgba(15,61,46,.88);
      font-weight: 750;
    }

    input,select,textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,.08);
      background:#fff;
      font-size: 15px;
      outline:none;
    }

    textarea{ min-height: 96px; resize: vertical; }

    .btn{
      margin-top: 18px;
      width:100%;
      border:0;
      border-radius: 18px;
      padding: 15px;
      font-size: 16px;
      font-weight: 900;
      letter-spacing: .10em;
      text-transform: uppercase;
      background: linear-gradient(135deg, var(--gold), var(--gold2));
      color:#fff;
      cursor:pointer;
    }

    .note{
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
      text-align:center;
    }

    .toast{
      margin-top: 12px;
      padding: 12px;
      border-radius: 14px;
      font-size: 14px;
      display:none;
    }
    .ok{ background:#e7f7ee; color:#1c6f48; }
    .bad{ background:#ffecec; color:#8b1a1a; }

    .time-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      margin-top: 8px;
    }

    .time-btn{
      border:1px solid rgba(0,0,0,.10);
      background:#fff;
      padding:10px;
      border-radius:14px;
      font-size:14px;
      font-weight:800;
      cursor:pointer;
    }

    .time-btn.selected{
      border-color: rgba(201,168,106,.85);
      box-shadow: 0 0 0 4px rgba(201,168,106,.18);
    }

    .time-btn.disabled{
      opacity:.45;
      cursor:not-allowed;
    }

    @media(max-width:720px){
      .grid{ grid-template-columns:1fr; }
      .time-grid{ grid-template-columns: repeat(3, 1fr); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">

      <div class="brand">MAGGIE BAKERY</div>
      <p class="sub">Submit a request and we’ll confirm your booking shortly.</p>

      <div class="info">
        <div class="pill has-call">
          <span>Open 10am – 7pm</span>
          <a class="call" href="tel:+64223189478">Call</a>
        </div>

        <div class="pill">
          <a target="_blank"
             href="https://www.google.com/maps/search/?api=1&query=1%2F200%20Dairy%20Flat%20Highway">
            1/200 Dairy Flat Highway
          </a>
        </div>

        <div class="pill gold">
          <span>Request only · Confirmation required</span>
        </div>
      </div>

      <form id="form" method="POST" target="hidden_iframe">

        <div class="grid">
          <div>
            <label>Name</label>
            <input name="name" required />
          </div>
          <div>
            <label>Phone</label>
            <input name="phone" required />
          </div>
        </div>

        <div class="grid">
          <div>
            <label>Email (optional)</label>
            <input name="email" type="email" />
          </div>
          <div>
            <label>Guests</label>
            <select name="guests" id="guests" required>
              <option value="">Select</option>
              <option>1</option><option>2</option><option>3</option><option>4</option>
              <option>5</option><option>6</option><option>7</option><option>8</option>
              <option value="8+">8+</option>
            </select>
          </div>
        </div>

        <div class="grid">
          <div>
            <label>Date</label>
            <input name="date" id="date" type="date" required />
          </div>

          <div>
            <label>Time</label>
            <div id="timeGrid" class="time-grid"></div>
            <select name="time" id="time" hidden></select>
          </div>
        </div>

        <label>Notes</label>
        <textarea name="notes"></textarea>

        <button class="btn" id="btn">Request a booking</button>

        <div class="toast ok" id="ok">Submitted!</div>
        <div class="toast bad" id="bad"></div>
      </form>

      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
    </div>
  </div>

<script>
  const SCRIPT_URL = "你的AppsScriptURL";

  const OPEN_HOURS = { start: "10:00", end: "18:00" };
  const SLOT_MINUTES = 30;

  const dateEl = document.getElementById("date");
  const timeEl = document.getElementById("time");
  const timeGrid = document.getElementById("timeGrid");

  function todayYMD(){
    const t = new Date();
    return t.toISOString().split("T")[0];
  }

  dateEl.min = todayYMD();

  dateEl.addEventListener("change", refreshTimes);

  function toMinutes(t){
    const [h,m] = t.split(":").map(Number);
    return h*60 + m;
  }

  function toHHMM(min){
    return String(Math.floor(min/60)).padStart(2,"0")+":"+String(min%60).padStart(2,"0");
  }

  function buildSlots(){
    const slots=[];
    let s=toMinutes(OPEN_HOURS.start);
    const e=toMinutes(OPEN_HOURS.end);
    while(s<=e){ slots.push(toHHMM(s)); s+=SLOT_MINUTES;}
    return slots;
  }

  function refreshTimes(){
    const d=dateEl.value;
    if(!d)return;

    const now=new Date();
    const nowMin=now.getHours()*60+now.getMinutes();
    const today=todayYMD();

    timeGrid.innerHTML="";
    timeEl.innerHTML="";

    buildSlots().forEach(s=>{
      const b=document.createElement("button");
      b.className="time-btn";
      b.textContent=s;
      const min=toMinutes(s);

      if(d===today && min<nowMin){
        b.classList.add("disabled");
      }else{
        b.onclick=()=>{
          timeEl.value=s;
          document.querySelectorAll(".time-btn").forEach(x=>x.classList.remove("selected"));
          b.classList.add("selected");
        };
      }
      timeGrid.appendChild(b);
    });
  }
</script>

</body>
</html>
